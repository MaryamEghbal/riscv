پروژه شبیه‌ساز پردازنده RISC-V
دانشگاه صنعتی اصفهان - درس معماری کامپیوتر
استاد: دکتر امیر خورسندی

این پروژه به عنوان بخشی از درس معماری کامپیوتر برای طراحی و پیاده‌سازی یک پردازنده ۳۲ بیتی مبتنی بر معماری مجموعه دستورالعمل (ISA) باز و استاندارد RISC-V (نسخه RV32I به همراه افزونه M) انجام شده است.

پروژه شامل سه فاز اصلی است:

طراحی سخت‌افزار: طراحی کامل مسیر داده (Datapath) و واحد کنترل (Control Unit) در نرم‌افزار Logisim-evolution.

پیاده‌سازی اسمبلر: یک اسمبلر دو مرحله‌ای به زبان پایتون که کدهای اسمبلی RISC-V را به کد ماشین باینری تبدیل می‌کند.

پیاده‌سازی شبیه‌ساز گرافیکی: یک شبیه‌ساز نرم‌افزاری با رابط کاربری گرافیکی (GUI) به زبان پایتون و با استفاده از کتابخانه tkinter که اجرای برنامه‌ها روی پردازنده طراحی شده را شبیه‌سازی و نمایش می‌دهد.

🌟 ویژگی‌های اصلی
معماری سخت‌افزار
پیاده‌سازی مسیر داده تک‌چرخه‌ای (Single-Cycle Datapath).

واحد کنترل مبتنی بر ROM برای رمزگشایی opcode.

واحد کنترل ALU سفارشی برای تشخیص دستورات R-type بر اساس funct3 و funct7.

پشتیبانی از مجموعه دستورات پایه RV32I و افزونه ضرب و تقسیم RV32M.

اسمبلر
پیاده‌سازی به زبان پایتون.

فرآیند دو مرحله‌ای (Two-Pass) برای مدیریت بهینه برچسب‌ها (Labels).

پشتیبانی از شبه‌دستورات رایج مانند li, mv, nop, not, neg.

پشتیبانی از دستورات راهنما (Directives) شامل .word, .half, .byte, .align.

تولید فایل خروجی باینری (.bin) سازگار با شبیه‌ساز.

شبیه‌ساز گرافیکی
پیاده‌سازی به زبان پایتون با استفاده از tkinter و تم مدرن ttkthemes.

نمایش زنده و کامل وضعیت پردازنده شامل:

جدول رجیسترها: نمایش نام، نام قراردادی (ABI)، مقدار هگز و ده‌دهی هر ۳۲ رجیستر.

هایلایت تغییرات: رجیسترهایی که مقدارشان تغییر می‌کند به صورت خودکار هایلایت می‌شوند.

نمایشگر حافظه: نمایش محتوای حافظه به صورت هگز و اسکی (ASCII).

نمایشگر PC: نمایش مقدار فعلی شمارنده برنامه.

کنترل کامل بر اجرای برنامه با دکمه‌های Run/Pause, Step, Reset.

🛠️ پیش‌نیازها
برای اجرای کامل این پروژه، به نرم‌افزارها و کتابخانه‌های زیر نیاز دارید:

Python 3.x: برای اجرای اسکریپت‌های اسمبلر و شبیه‌ساز.

Logisim-evolution: برای مشاهده و ویرایش فایل‌های طراحی سخت‌افزار.

کتابخانه ttkthemes: برای ظاهر گرافیکی مدرن شبیه‌ساز. برای نصب آن، دستور زیر را در ترمینال یا Command Prompt خود اجرا کنید:

pip install ttkthemes

🚀 روند بیلد و اجرای پروژه
روند کامل از نوشتن یک برنامه اسمبلی تا اجرای آن در شبیه‌ساز به صورت زیر است:

مرحله ۱: اسمبل کردن برنامه (تبدیل .asm به .bin)
یک فایل متنی با پسوند .asm بسازید و کدهای اسمبلی RISC-V خود را در آن بنویسید. (چند نمونه در پوشه /examples موجود است).

ترمینال یا Command Prompt را باز کرده و به ریشه پروژه بروید.

اسکریپت اسمبلر را با دستور زیر اجرا کنید:

python src/assembler.py <path/to/your_program.asm> <path/to/output.bin>

مثال:

python src/assembler.py examples/simple_math.asm build/simple_math.bin

این دستور، فایل اسمبلی شما را به یک فایل باینری قابل اجرا برای شبیه‌ساز تبدیل می‌کند.

مرحله ۲: اجرای شبیه‌ساز گرافیکی
اسکریپت شبیه‌ساز را با دستور زیر در ترمینال اجرا کنید:

python src/gui_simulator.py

پنجره شبیه‌ساز باز می‌شود. روی دکمه "📂 Load Program" کلیک کنید.

فایل .bin را که در مرحله قبل ساخته‌اید، انتخاب و باز کنید.

حالا می‌توانید با استفاده از دکمه‌های "Step" (برای اجرای گام به گام) یا "▶️ Run" (برای اجرای پیوسته) برنامه خود را شبیه‌سازی کرده و نتایج را به صورت زنده مشاهده کنید.

📁 ساختار پروژه
```
├── doc/
│   └── (مستندات طراحی معماری و RTL)
├── examples/
│   ├── input.asm
│   └── ... (سایر برنامه‌های نمونه)
├── logisim/
│   └── processor.circ 
├── src/
│   ├── assembler.py
│   └── simulator_core.py
└── README.md

```
👥 اعضای گروه
مریم اقبال - (40216713)

سپیده امینی - (شماره دانشجویی)

 صبا جلال کمالی - (شماره دانشجویی)

